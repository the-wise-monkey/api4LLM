services:
  api4llm:
    container_name: api4llm
    restart: unless-stopped

    build: ./CLIProxyAPI
    image: api4llm:latest

    ports:
      - "8317:8317"
      - "54545:54545"  # Claude OAuth callback port

    volumes:
      # Config file mount
      - type: bind
        source: ./config.yaml
        target: /CLIProxyAPI/config.yaml

      # Persistent auth/token storage (fixes mkdir crash)
      - type: bind
        source: ./data
        target: /CLIProxyAPI/data

    environment:
      - TZ=America/Montevideo
